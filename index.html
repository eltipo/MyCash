<!doctype html>
<html lang="en">

<head>

  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs5/dt-1.11.5/b-2.2.2/b-colvis-2.2.2/b-html5-2.2.2/fh-3.2.2/r-2.2.9/sc-2.0.5/sb-1.3.2/datatables.min.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css" integrity="sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">



  <?!= include('JavaScript'); ?>

  <?!= include('CSS'); ?>



  <title>Mis Gastos</title>
</head>


<body style="background-image: url('https://mdbootstrap.com/img/Photos/Others/images/89.jpg');">

  <header class="fixed-top" >
    <div class="p-1 text-center bg-dark" style="opacity: 70%;">
      <h1 style="font-size: 50px ;color:white; opacity: 100%;">Mis Gastos</h1>
    </div>
    <div class="text-center bg-dark" style="opacity: 70%;">
      <span style="font-size: 30px ;color:white; opacity: 100%;">SALDO:<span id="money"></span></span>
    </div>
  </header>


  <div class="table-responsive" style="padding:3%; padding-top: 10em">
    <table id="data-table" class="table stripe table-sm compact table-striped row-border dataTable no-footer"
      style="font-size: 14px; width: 100%;" aria-describedby="data-table_info">
    </table>


    <div class="fixed-bottom" style="height: 6em;">
      <div class="gap-2 gy-5 position-absolute top-0 end-0">
        <div class="offcanvas offcanvas-bottom " tabindex="-1" id="offcanvasBottom"
          aria-labelledby="offcanvasBottomLabel" style="height: 670px">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasBottomLabel">Cargar Expensas</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>


          <!-- MODAL DE INGRESO DE GASTOS -->
          <div class="offcanvas-body small offcanvas-horizontal-width:400px;">

            <div class="container-sm">
              <div class="input-group no-autofill  input-group input-group-lg">
                <input type="text"  pattern="[0-9]*" inputmode="numeric" step="0,01" id="amount" style="font-size: 38px" class="form-control form-control-lg" value=""  placeholder="$Â 0,00" >
              </div>
              <div class="btn-group mb-3" role="group" aria-label="Basic mixed styles example">
                <button type="button" id="addMinus" class="btn btn-danger">Gasto</button>
              </div>


              <div class="input-group mb-3">
                <span class="input-group-text" id="basic-addon1" >Fecha</span>
                <input type="date" id="date" class="form-control" value="">
              </div>

              <div class="input-group mb-3">
                <label class="input-group-text" for="inputGroupSelect01">Categoria</label>
                <input class="form-control" list="inputGroupSelect01" id="inputGroupSelect01Value" placeholder="Type to search...">
                <datalist id="inputGroupSelect01">

                </datalist>
              </div>

              <div class="input-group mb-3">
                <span class="input-group-text no-autofill" id="basic-addon1">Pagar a quien:</span>
                <input type="text" class="form-control" id="payee" placeholder="Nombre del lugar" aria-label="Username" aria-describedby="basic-addon1">
              </div>

              <div class="input-group mb-3">
                <span class="input-group-text no-autofill" id="basic-addon1">Notas:</span>
                <input type="text" class="form-control" id="notes" placeholder="Nombre del lugar" aria-label="Username" aria-describedby="basic-addon1">
              </div>

              <div class="input-group mb-3 input-group-lg">
                <button type="submit" id="clearValues"  class="btn btn-warning btn-lg">Limpiar</button>
                <button type="submit" id="setExpense" data-bs-dismiss="offcanvas" class="btn btn-primary btn-lg">Guardar</button>
              </div>
            </div>
          </div>
        </div>




        <button class="btn btn-link" id="openModal" style="margin-right: 14px;" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">
                       
          <svg width="66" height="66" enable-background="new 0 0 48 48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" fill="#4caf50" r="21"></circle><g fill="#fff"><path d="m21 14h6v20h-6z"></path><path d="m14 21h20v6h-20z"></path></g></svg>         

        </button>
      </div>
    </div>
  </div>





  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
  </script>
  <script type="text/javascript" src="https://cdn.datatables.net/v/bs5/dt-1.11.5/b-2.2.2/b-colvis-2.2.2/b-html5-2.2.2/fh-3.2.2/r-2.2.9/sc-2.0.5/sb-1.3.2/datatables.min.js"></script>



  <?!= include('JavaScript'); ?>
  <script>
    var formatter = new Intl.NumberFormat('es-AR', {
      style: 'currency',
      currency: 'ARS',
    });
    document.querySelector('#amount').addEventListener('change', (e)=>{
    if(isNaN(e.target.value)){
        e.target.value = ''
    }else{
      e.target.value =formatter.format(e.target.value);
  } 
  })

  document.getElementById("addMinus").addEventListener("click", setMinus);
  document.getElementById("openModal").addEventListener("click", autoDate);
  document.getElementById("clearValues").addEventListener("click", resetValues);
  document.getElementById("setExpense").addEventListener("click",uploadExpense);
  document.addEventListener("DOMContentLoaded", loadMovimientos);
  document.addEventListener("DOMContentLoaded", loadCategories);
  document.addEventListener("DOMContentLoaded", loadSaldo);


  </script>

</body>

</html>